<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>App</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <style>
        #title {
            margin-bottom: 0;
        }
        #artist {
            margin-top: 0;
        }
        #albumArt {
            width: 150px;
            height: 150px;
        }
        #streamurl, #downloadurl {
            font-family: monospace;
            font-weight: bold;
        }
        #textinput {
            background: silver;
            width: 90vw;
        }
    </style>

</head>
<body>

    <h1 id="title">undefined</h1>
    <h3 id="artist">undefined</h3>
    <img id="albumArt" src="http://placehold.it/150x150">
    <p>Steamable URL: <span id="streamurl">undefined</span></p>
    <p>Downloadable URL: <span id="downloadurl">undefined</span></p>
    <hr>
    <input id="textinput" type="text"></input>
<br>
<input id="button_start" type="button" value="Start Streaming" onclick="doTheThing();"></input>
<input id="button_stop" type="button" value="Reset Stream" onclick="soundManager.stopAll();"></input>


<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script src="http://connect.soundcloud.com/sdk.js"></script>
<script>
    // initialize client with app credentials
    SC.initialize({
        client_id: '5833455462fac11c7b4ed7dd05c6b54a',
        redirect_uri: 'http://www.austinj.net/sc-app/callback.html'
    });

    //https://soundcloud.com/kristofferson/stop-crying-your-heart-out

    function doTheThing(){
        var sound = document.getElementById("textinput").value;
        $.get('http://api.soundcloud.com/resolve.json?url='+sound+'&client_id=5833455462fac11c7b4ed7dd05c6b54a', function (result) {
            console.log(result);
            SC.stream('/tracks/'+result.id, function(sound) { 
                console.log(sound);
                sound.play();
            });
            document.getElementById("title").innerHTML = result.title;
            document.getElementById("artist").innerHTML = result.user.username;
            document.getElementById("albumArt").setAttribute("src",result.artwork_url);
            document.getElementById("streamurl").innerHTML = result.stream_url;
            document.getElementById("downloadurl").innerHTML = result.download_url;
        });
    }


</script>
</body>
</html>
